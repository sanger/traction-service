default: &default
  saphyr:
    message:
      lims: &lims Traction
      key: bmap_flowcell
      fields:
        sample_uuid: &sample_uuid
          type: :model
          value: library.sample.external_id
        study_uuid: &study_uuid
          type: :model
          value: library.sample.external_study_id
        experiment_name:
          type: :model
          value: chip.run.name
        enzyme_name:
          type: :model
          value: library.enzyme.name
        chip_barcode:
          type: :model
          value: chip.barcode
        chip_serialnumber:
          type: :model
          value: chip.serial_number
        position:
          type: :model
          value: position
        id_library_lims:
          type: :model
          value: library.id
        id_flowcell_lims:
          type: :model
          value: id
        instrument_name:
          type: :string
          value: saphyr
        last_updated: &timestamp
          type: :constant
          value: Time.current
  pacbio:
    message:
      lims: *lims
      key: pac_bio_run
      fields:
        last_updated: *timestamp
        sample_uuid: *sample_uuid
        study_uuid: *study_uuid
        id_pac_bio_run_lims:
          type: :model
          value: plate.run.id
        pac_bio_run_uuid:
          type: :model
          value: plate.run.uuid
        cost_code:
          type: :model
          value: library.sample.cost_code
        tag_sequence:
          type: :model
          value: library.tag_sequence
        plate_barcode:
          type: :model
          value: plate.barcode
        plate_uuid:
          type: :model
          value: plate.uuid
        well_label:
          type: :model
          value: position
        well_uuid_lims:
          type: :model
          value: uuid
        pac_bio_library_tube_id_lims:
          type: :model
          value: library.id
        pac_bio_library_tube_uuid:
          type: :model
          value: library.uuid
        pac_bio_library_tube_name:
          type: :model
          value: library.name
    sample_sheet:
      headers:
        - System name
        - Run Name
        - Sample Well
        - Sample Name
        - Movie Time per SMRT Cell (hours)
        - Insert Size (bp)
        - Template Prep Kit (Box Barcode)
        - Binding Kit (Box Barcode)
        - Sequencing Kit (Box Barcode)
        - Sequencing Mode (CLR/ CCS)
        - On plate loading concentration (mP)
        - DNA Control Complex (Box Barcode)
        - Generate CCS Data

development:
  <<: *default

test:
  <<: *default
